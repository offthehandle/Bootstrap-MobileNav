
/*
 * Theme for Twitter Bootstrap 3 Mobile Nav Plugin
 *
 * Copyright (c) 2015 Adam J De Lucia
 * Licensed under the MIT License.
 * http://opensource.org/licenses/MIT
 * 
 * Author: Adam J De Lucia
 * Version: 1.1.1
 * Date: May 17, 2015
 * 
 */

// Scaffolding selector structure and responsive breakpoints
@mobile-nav-max-breakpoint: 767px;
@mobile-nav-min-breakpoint: (@mobile-nav-max-breakpoint + 1);
@mobile-nav-id: mobile-nav; // id - #
@mobile-nav-btn: nav-btn; // class - .
@mobile-nav-btn-last: last-nav-btn; // class - .
@close-mobile-nav: nav-btn-out; // id - #


// Link styles and dynamic sizing
@mobile-nav-link-count: 5;
@mobile-nav-link-sizing: 132px / @mobile-nav-link-count;
@mobile-nav-link-sizing-adjust: @mobile-nav-link-sizing * 0.72;
@mobile-nav-theme-font: Arial, Helvetica, sans-serif;
@mobile-nav-theme-color: rgb(48,120,144);
@mobile-nav-theme-text-color: #fff;
@mobile-nav-menu-radius: 4px; // single number with units
@close-mobile-nav-radius: 100px; // single number with units

@media (max-width: @mobile-nav-max-breakpoint) {
    #@{mobile-nav-id} {
        display: none;
    }

    .navbar-collapse.collapse.in {
        min-height: 30px;
        overflow: visible;

        // Style to display mobile nav when navbar collapse is shown
        #@{mobile-nav-id} {
            position: fixed;
            top: 25px;
            right: 20px;
            bottom: 23px;
            left: 20px;
            display: block;
            margin: 0;
            z-index: 1045;

            > li:first-child {
                a {
                    -webkit-border-radius: @mobile-nav-menu-radius @mobile-nav-menu-radius 0 0;
                    -moz-border-radius: @mobile-nav-menu-radius @mobile-nav-menu-radius 0 0;
                    border-radius: @mobile-nav-menu-radius @mobile-nav-menu-radius 0 0;
                }
            }

            li {
                height: 100% / @mobile-nav-link-count;
                border-bottom: solid 1px darken(@mobile-nav-theme-color, 15%);

                // Style for last link in menu
                &.@{mobile-nav-btn-last} {
                    border: none 0;

                    a {
                        -webkit-border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                        -moz-border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                        border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                    }

                    // Last link style when in a dropdown
                    &.dropdown {
                        ul.dropdown-menu {
                            a {
                                -webkit-border-radius: 0;
                                -moz-border-radius: 0;
                                border-radius: 0;
                            }

                            li:last-child {
                                a {
                                    -webkit-border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                                    -moz-border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                                    border-radius: 0 0 @mobile-nav-menu-radius @mobile-nav-menu-radius;
                                }
                            }
                        }
                    }
                }

                // Style for dropdowns in mobile nav
                &.dropdown {
                    > a.dropdown-toggle {
                        display: none;
                    }

                    ul.dropdown-menu {
                        top: 0;
                        right: 0;
                        bottom: 0;
                        background: transparent;
                        border: none 0;
                        -webkit-box-shadow: none;
                        -moz-box-shadow: none;
                        box-shadow: none;
                        display: block;
                        margin: 0;
                        padding: 0;

                        li:last-child {
                            border-bottom: none 0;
                        }
                    }
                }

                // Style for menu links
                .@{mobile-nav-btn} {
                    position: relative;
                    height: 100%;
                    font-family: @mobile-nav-theme-font;
                    font-size: round(@mobile-nav-link-sizing);
                    color: @mobile-nav-theme-text-color;
                    text-transform: uppercase;
                    background-color: @mobile-nav-theme-color;
                    display: block;
                    padding: 0;

                    &:hover, &:focus {
                        color: darken(@mobile-nav-theme-color, 12%);
                    }

                    // Vertical centering of link text
                    span {
                        position: absolute;
                        top: 50%;
                        right: 0;
                        left: 0;
                        line-height: round(@mobile-nav-link-sizing);
                        text-align: center;
                        margin-top: -(round(@mobile-nav-link-sizing / 2));
                    }
                }
            }
        }
    }
}

// Font sizing to fit nav to orientation
.navbar-collapse.collapse.in #@{mobile-nav-id} li {
    .@{mobile-nav-btn} {
        @media (max-width: @mobile-nav-max-breakpoint) and (orientation: landscape) {
            font-size: round(@mobile-nav-link-sizing-adjust);
        }

        span {
            @media (max-width: @mobile-nav-max-breakpoint) and (orientation: landscape) {
                line-height: round(@mobile-nav-link-sizing-adjust);
                margin-top: -(round(@mobile-nav-link-sizing-adjust / 2));
            }
        }
    }
}

// Style for close nav menu button
#@{close-mobile-nav} {
    position: fixed;
    top: 12px;
    right: 50px;
    height: auto !important;
    border: none 0 !important;
    z-index: 1050;

    @media (min-width: @mobile-nav-min-breakpoint) {
        display: none;
    }

    a {
        width: 32px;
        height: 32px;
        font-size: 3em;
        color: darken(@mobile-nav-theme-color, 15%);
        line-height: 32px;
        text-align: center;
        background-color: #fff;
        -webkit-border-radius: @close-mobile-nav-radius;
        -moz-border-radius: @close-mobile-nav-radius;
        border-radius: @close-mobile-nav-radius;
        display: block;
        padding: 0;
    }
}

// Mixin for Bootstrap dropdowns in mobile nav
.mobile-nav-dropdown(@dropdown-link-count) {
    height: (100% / @mobile-nav-link-count) * @dropdown-link-count !important;

    ul.dropdown-menu > li {
        height: 100% / @dropdown-link-count !important;
    }
}
